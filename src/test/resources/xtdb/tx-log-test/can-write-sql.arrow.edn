{:schema
 #xt/schema (["tx-ops"
              :list
              ["$data$"
               :union
               ["put-docs"
                :struct
                ["iids" :list ["$data$" [:fixed-size-binary 16]]]
                ["documents"
                 :union
                 ["public/foo"
                  :list
                  ["$data$"
                   :struct
                   ["_id" :i64]
                   ["foo" :utf8 :?]
                   ["bar" :union ["f64" :f64 :?] ["i64" :i64]]]]]
                ["_valid_from" [:timestamp-tz :micro "UTC"] :?]
                ["_valid_to" [:timestamp-tz :micro "UTC"] :?]]
               ["sql" :struct ["query" :utf8] ["args" :varbinary :?]]]]
             ["system-time" [:timestamp-tz :micro "UTC"] :?]
             ["default-tz" :utf8 :?]
             ["user" :utf8 :?]),
 :data
 [{:tx-ops
   [#xt/tagged [:put-docs
                {:iids [#bytes "a4e167a76a05add8a8654c169b07b044"],
                 :documents #xt/tagged [:public/foo [{:xt/id 0}]]}]
    #xt/tagged [:put-docs
                {:iids
                 [#bytes "4cd9b7672d7fbee8fb51fb1e049f6903"
                  #bytes "420fce314175df402adbeae3cfbbb856"],
                 :documents
                 #xt/tagged [:public/foo
                             [{:xt/id 1, :bar 3.3}
                              {:xt/id 2, :foo "hello", :bar 12}]]}]
    #xt/tagged [:sql
                {:query
                 "UPDATE foo FOR PORTION OF VALID_TIME FROM DATE '2021-01-01' TO DATE '2024-01-01' SET bar = 'world' WHERE _id = ?",
                 :args
                 #bytes "ffffffff900000001000000000000a000e0006000d0008000a000000000004001000000000010a000c000000080004000a00000008000000080000000000000001000000180000000000120018001400000013000c000000080004001200000014000000140000001c0000000000000220000000000000000000000008000c0008000700080000000000000140000000030000003f5f3000ffffffff8800000014000000000000000c0016000e001500100004000c0000001000000000000000000004001000000000030a0018000c00080004000a000000140000003800000001000000000000000000000002000000000000000000000001000000000000000800000000000000080000000000000000000000010000000100000000000000ffffffffffffffff0100000000000000010000000000000000000000"}]
    #xt/tagged [:sql
                {:query
                 "DELETE FROM foo FOR PORTION OF VALID_TIME FROM DATE '2023-01-01' TO DATE '2025-01-01' WHERE _id = ?",
                 :args
                 #bytes "ffffffff900000001000000000000a000e0006000d0008000a000000000004001000000000010a000c000000080004000a00000008000000080000000000000001000000180000000000120018001400000013000c000000080004001200000014000000140000001c0000000000000220000000000000000000000008000c0008000700080000000000000140000000030000003f5f3000ffffffff8800000014000000000000000c0016000e001500100004000c0000001000000000000000000004001000000000030a0018000c00080004000a000000140000003800000001000000000000000000000002000000000000000000000001000000000000000800000000000000080000000000000000000000010000000100000000000000ffffffffffffffff0100000000000000010000000000000000000000"}]]}]}
